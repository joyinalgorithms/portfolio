{% extends "amazonlayout.html" %}
{% block title %}Amazon{% endblock %}
{% block stylesheet %}
    <link rel="stylesheet" href="/static/styles/frontend/amazon-header.css">
    <link rel="stylesheet" href="/static/styles/frontend/amazon.css">
{% endblock %}
{% block body %}
    <div class="amazon-header">
        <div class="amazon-header-left-section">
            <a href="/amazon" class="header-link">
                <img class="amazon-logo" src="/static/images/amazon-logo-white.png">
                <img class="amazon-mobile-logo" src="/static/images/amazon-mobile-logo-white.png">
            </a>
        </div>

        <div class="amazon-header-middle-section">
            <input class="search-bar" type="text" placeholder="Search">

            <button class="search-button">
                <img class="search-icon" src="/static/images/icons/search-icon.png">
            </button>
        </div>

        <div class="amazon-header-right-section">
            <a class="orders-link header-link" href="/amazon">
                <span class="returns-text">Returns</span>
                <span class="orders-text">& Orders</span>
            </a>

            <a class="cart-link header-link" href="/amazon/checkout">
                <img class="cart-icon" src="/static/images/icons/cart-icon.png">
                <div class="cart-quantity js-cart-quantity">{{ number }}</div>
                <div class="cart-text">Cart</div>
            </a>
        </div>
    </div>

    <div class="main">

        <div class="products-grid js-products-grid">
            {% for product in products %}
                <div class="product-container">
                    <div class="product-image-container">
                        <img class="product-image" src="{{ product.image }}">
                    </div>
                    <div class="product-name limit-text-to-2-lines">
                        {{ product.name }}
                    </div>

                    <div class="product-rating-container">
                        {% set rating_suffix = (((product.rating_stars * 2) | round) * 5) | int %}
                        <img class="product-rating-stars" src="/static/images/ratings/rating-{{ rating_suffix }}.png">
                        <div class="product-rating-count link-primary">
                            {{ product.rating_count }}
                        </div>
                    </div>
                    <div class="product-price">
                        {{ product.price_cents }}
                    </div>
                    <form action="/amazon/add-to-cart" method="POST">
                        <div class="product-quantity-container">
                            <select name="quantity" class="js-product-quantity">
                                <option selected value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                        <div class="product-spacer"></div>
                        <div class="added-to-cart">
                            <img src="/static/images/icons/checkmark.png">
                            Added
                        </div>
                        <button type="submit" class="add-to-cart-button button-primary js-add-to-cart" data-product-id="{{product.id}}">
                            Add to Cart
                        </button>
                    </div>
                    <input type="hidden" name="product-name" value="{{ product.name }}">
                    <input type="hidden" name="product-id" value="{{ product.id }}">
                    <input type="hidden" name="product-image" value="{{ product.image }}">
                    <input type="hidden" name="price" value="{{ product.price_cents }}">
                </form>
            {% endfor %}
        </div>
    </div>

    {% block scripts %}<script type="module" src="/static/scripts/frontend/amazon.js"></script>{% endblock %}
{% endblock %}
